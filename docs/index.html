<!doctype html>
<html lang="vi">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>Love Board ‚ô•</title>
    <link rel="stylesheet" href="style.css" />
  </head>
  <body>
    <header class="topbar">
      <div class="brand">
        <span class="logo">‚ô•</span>
        <div class="brand-text">
          <strong>Love Board</strong>
          <small>Nh·ªØng kho·∫£nh kh·∫Øc c·ªßa t·ª•i m√¨nh</small>
        </div>
      </div>

      <div class="search">
        <input
          id="searchInput"
          type="search"
          placeholder="T√¨m k·ª∑ ni·ªám‚Ä¶ (vd: ƒê√† L·∫°t, sinh nh·∫≠t, 2025)"
        />
        <button id="searchBtn" type="button" aria-label="search">üîé</button>
      </div>

      <!-- CHIP FILTER (ƒë√£ ho·∫°t ƒë·ªông) -->
      <nav class="chips" aria-label="filters">
        <button class="chip active" data-filter="all" type="button">
          T·∫•t c·∫£
        </button>
        <button class="chip" data-filter="du_lich" type="button">
          Du l·ªãch
        </button>
        <button class="chip" data-filter="sinh_nhat" type="button">
          Sinh nh·∫≠t
        </button>
        <button class="chip" data-filter="hen_ho" type="button">H·∫πn h√≤</button>
        <button class="chip" data-filter="ky_niem" type="button">
          K·ª∑ ni·ªám
        </button>
      </nav>
    </header>

    <main class="container">
      <section class="masonry" aria-label="photo grid">
        <!-- PIN 1 -->
        <article
          class="pin"
          data-tags="du_lich ky_niem"
          data-title="ƒê√† L·∫°t ‚Äì chi·ªÅu s∆∞∆°ng"
          data-note="L√∫c n√†y tr·ªùi l·∫°nh m√† hai ƒë·ª©a c∆∞·ªùi nh∆∞ ƒëi√™n"
        >
          <a
            class="pin-media"
            href="images/01.jpg"
            target="_blank"
            rel="noopener noreferrer"
          >
            <img src="images/01.jpg" alt="K·ª∑ ni·ªám 01" />
          </a>
          <div class="pin-meta">
            <div class="pin-title">ƒê√† L·∫°t ‚Äì chi·ªÅu s∆∞∆°ng</div>
            <div class="pin-sub">
              <span class="tag">#du_lich</span>
              <span class="dot">‚Ä¢</span>
              <time>2025-12-02</time>
            </div>
            <p class="pin-note">
              ‚ÄúL√∫c n√†y tr·ªùi l·∫°nh m√† hai ƒë·ª©a c∆∞·ªùi nh∆∞ ƒëi√™n.‚Äù
            </p>
          </div>
        </article>

        <!-- PIN 2 -->
        <article
          class="pin"
          data-tags="sinh_nhat ky_niem"
          data-title="Sinh nh·∫≠t em"
          data-note="B√°nh h∆°i x·∫•u nh∆∞ng t√¨nh th√¨ ƒë·∫πp"
        >
          <a
            class="pin-media"
            href="images/02.jpg"
            target="_blank"
            rel="noopener noreferrer"
          >
            <img src="images/02.jpg" alt="K·ª∑ ni·ªám 02" />
          </a>
          <div class="pin-meta">
            <div class="pin-title">Sinh nh·∫≠t em</div>
            <div class="pin-sub">
              <span class="tag">#sinh_nhat</span>
              <span class="dot">‚Ä¢</span>
              <time>2025-10-18</time>
            </div>
            <p class="pin-note">B√°nh h∆°i x·∫•u nh∆∞ng t√¨nh th√¨ ƒë·∫πp :))</p>
          </div>
        </article>

        <!-- PIN 3 -->
        <article
          class="pin"
          data-tags="hen_ho ky_niem"
          data-title="C√† ph√™ cu·ªëi tu·∫ßn"
          data-note="G√≥c quen, ng∆∞·ªùi th∆∞∆°ng, b√¨nh y√™n"
        >
          <a
            class="pin-media"
            href="images/03.jpg"
            target="_blank"
            rel="noopener noreferrer"
          >
            <img src="images/03.jpg" alt="K·ª∑ ni·ªám 03" />
          </a>
          <div class="pin-meta">
            <div class="pin-title">C√† ph√™ cu·ªëi tu·∫ßn</div>
            <div class="pin-sub">
              <span class="tag">#hen_ho</span>
              <span class="dot">‚Ä¢</span>
              <time>2026-01-05</time>
            </div>
            <p class="pin-note">G√≥c quen, ng∆∞·ªùi th∆∞∆°ng, b√¨nh y√™n.</p>
          </div>
        </article>

        <!-- B·∫°n th√™m ·∫£nh m·ªõi: copy 1 block PIN v√† ƒë·ªïi:
           - images/04.jpg
           - data-tags="..."
           - ti√™u ƒë·ªÅ + note + ng√†y
      --></section>

      <footer class="footer">
        <span>Made with ‚ô•</span>
        <span class="sep">‚Ä¢</span>
        <span>Tip: b·∫•m v√†o ·∫£nh ƒë·ªÉ m·ªü full</span>
      </footer>
    </main>

    <script>
      const chips = document.querySelectorAll(".chip[data-filter]");
      const pins = document.querySelectorAll(".pin");
      const searchInput = document.getElementById("searchInput");
      const searchBtn = document.getElementById("searchBtn");

      let currentFilter = "all";
      let currentQuery = "";

      function normalizeText(s) {
        return (s || "")
          .toLowerCase()
          .normalize("NFD")
          .replace(/[\u0300-\u036f]/g, "") // b·ªè d·∫•u ti·∫øng Vi·ªát
          .trim();
      }

      function pinMatchesFilter(pin, filter) {
        const tags = (pin.getAttribute("data-tags") || "")
          .split(/\s+/)
          .filter(Boolean);
        return filter === "all" || tags.includes(filter);
      }

      function pinMatchesSearch(pin, query) {
        if (!query) return true;

        const title = normalizeText(pin.getAttribute("data-title"));
        const note = normalizeText(pin.getAttribute("data-note"));
        const tags = normalizeText(pin.getAttribute("data-tags"));
        const date = normalizeText(pin.querySelector("time")?.textContent);

        const haystack = `${title} ${note} ${tags} ${date}`;
        return haystack.includes(query);
      }

      function applyAll() {
        const q = normalizeText(currentQuery);

        pins.forEach((pin) => {
          const show =
            pinMatchesFilter(pin, currentFilter) && pinMatchesSearch(pin, q);
          pin.style.display = show ? "" : "none";
        });
      }

      chips.forEach((chip) => {
        chip.addEventListener("click", () => {
          chips.forEach((c) => c.classList.remove("active"));
          chip.classList.add("active");

          currentFilter = chip.dataset.filter;
          applyAll();

          window.scrollTo({ top: 0, behavior: "smooth" });
        });
      });

      function doSearch() {
        currentQuery = searchInput.value;
        applyAll();
        window.scrollTo({ top: 0, behavior: "smooth" });
      }

      searchBtn.addEventListener("click", doSearch);
      searchInput.addEventListener("input", doSearch);

      // m·∫∑c ƒë·ªãnh
      applyAll();
    </script>
  </body>
</html>
