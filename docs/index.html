<!doctype html>
<html lang="vi">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>Love Board ‚ô•</title>
    <link rel="stylesheet" href="style.css" />
  </head>

  <body>
    <header class="topbar">
      <div class="brand">
        <span class="logo">‚ô•</span>
        <div class="brand-text">
          <strong>Love Board</strong>
          <small>Nh·ªØng kho·∫£nh kh·∫Øc c·ªßa t·ª•i m√¨nh</small>
        </div>
      </div>

      <div class="search">
        <input
          id="searchInput"
          type="search"
          placeholder="T√¨m k·ª∑ ni·ªám‚Ä¶ (vd: Quy Nh∆°n, sinh nh·∫≠t, 2026)"
        />
        <button id="searchBtn" type="button" aria-label="search">üîé</button>
      </div>

      <!-- CHIP FILTER -->
      <nav class="chips" aria-label="filters">
        <button class="chip active" data-filter="all" type="button">
          T·∫•t c·∫£
        </button>
        <button class="chip" data-filter="du_lich" type="button">
          Du l·ªãch
        </button>
        <button class="chip" data-filter="sinh_nhat" type="button">
          Sinh nh·∫≠t
        </button>
        <button class="chip" data-filter="hen_ho" type="button">H·∫πn h√≤</button>
        <button class="chip" data-filter="ky_niem" type="button">
          K·ª∑ ni·ªám
        </button>
      </nav>
    </header>

    <main class="container">
      <section class="masonry" aria-label="photo grid">
        <!-- ================= PIN 1: QUY NH∆†N ================= -->
        <article
          class="pin"
          data-tags="du_lich ky_niem"
          data-title="Quy Nh∆°n ‚Äì ƒëi bi·ªÉn"
          data-note="Chuy·∫øn ƒëi bi·ªÉn Quy Nh∆°n. ƒê∆∞·ª£c anh H·∫£o ƒë√®o ƒëi, vui mu·ªën x·ªâu."
        >
          <a
            class="pin-media"
            href="images/01.jpg"
            target="_blank"
            rel="noopener noreferrer"
          >
            <img src="images/01.jpg" alt="Quy Nh∆°n ƒëi bi·ªÉn" />
          </a>

          <div class="pin-meta">
            <div class="pin-title">Quy Nh∆°n ‚Äì ƒëi bi·ªÉn</div>

            <div class="pin-sub">
              <span class="tag">#du_lich</span>
              <span class="dot">‚Ä¢</span>
              <time>2025-06-26</time>
            </div>

            <p class="pin-note">Bi·ªÉn xanh ‚Äì ng∆∞·ªùi th∆∞∆°ng ‚Äì b√¨nh y√™n.</p>
          </div>
        </article>

        <!-- ================= PIN 2: SINH NH·∫¨T ================= -->
        <article
          class="pin"
          data-tags="sinh_nhat ky_niem"
          data-title="Sinh nh·∫≠t em"
          data-note="Sinh nh·∫≠t 07/01/2026. B√°nh h∆°i x·∫•u nh∆∞ng t√¨nh th√¨ ƒë·∫πp :))"
        >
          <a
            class="pin-media"
            href="images/02.jpg"
            target="_blank"
            rel="noopener noreferrer"
          >
            <img src="images/02.jpg" alt="Sinh nh·∫≠t em" />
          </a>

          <div class="pin-meta">
            <div class="pin-title">Sinh nh·∫≠t em</div>

            <div class="pin-sub">
              <span class="tag">#sinh_nhat</span>
              <span class="dot">‚Ä¢</span>
              <time>2026-01-07</time>
            </div>

            <p class="pin-note">C·∫£m ∆°n anh v√¨ ng√†y h√¥m ƒë√≥ (v√† v√¨ anh n·ªØa) ‚ô•</p>
          </div>
        </article>

        <!-- ================= PIN 3: C√Ä PH√ä ================= -->
        <article
          class="pin"
          data-tags="hen_ho ky_niem"
          data-title="C√† ph√™ Cam Ranh"
          data-note="02/07/2025 ‚Äì H·∫πn h√≤ c√† ph√™ ·ªü Cam Ranh. L·∫ßn ƒë·∫ßu ƒëi ch∆°i xa c√πng nhau."
        >
          <a
            class="pin-media"
            href="images/03.jpg"
            target="_blank"
            rel="noopener noreferrer"
          >
            <img src="images/03.jpg" alt="C√† ph√™ Cam Ranh" />
          </a>

          <div class="pin-meta">
            <div class="pin-title">C√† ph√™ Cam Ranh</div>

            <div class="pin-sub">
              <span class="tag">#hen_ho</span>
              <span class="dot">‚Ä¢</span>
              <time>2025-07-02</time>
            </div>

            <p class="pin-note">M·ªôt bu·ªïi b√¨nh y√™n, ch·ªâ c·∫ßn c√≥ nhau.</p>
          </div>
        </article>
        <!-- =================================================== -->
      </section>

      <footer class="footer">
        <span>Made with ‚ô•</span>
        <span class="sep">‚Ä¢</span>
        <span>Tip: b·∫•m v√†o ·∫£nh ƒë·ªÉ m·ªü full</span>
      </footer>
    </main>

    <script>
      const chips = document.querySelectorAll(".chip[data-filter]");
      const pins = document.querySelectorAll(".pin");
      const searchInput = document.getElementById("searchInput");
      const searchBtn = document.getElementById("searchBtn");

      let currentFilter = "all";
      let currentQuery = "";

      function normalizeText(s) {
        return (s || "")
          .toLowerCase()
          .normalize("NFD")
          .replace(/[\u0300-\u036f]/g, "") // b·ªè d·∫•u ti·∫øng Vi·ªát
          .trim();
      }

      function pinMatchesFilter(pin, filter) {
        const tags = (pin.getAttribute("data-tags") || "")
          .split(/\s+/)
          .filter(Boolean);
        return filter === "all" || tags.includes(filter);
      }

      function pinMatchesSearch(pin, query) {
        if (!query) return true;

        const title = normalizeText(pin.getAttribute("data-title"));
        const note = normalizeText(pin.getAttribute("data-note"));
        const tags = normalizeText(pin.getAttribute("data-tags"));
        const date = normalizeText(pin.querySelector("time")?.textContent);

        const haystack = `${title} ${note} ${tags} ${date}`;
        return haystack.includes(query);
      }

      function applyAll() {
        const q = normalizeText(currentQuery);

        pins.forEach((pin) => {
          const show =
            pinMatchesFilter(pin, currentFilter) && pinMatchesSearch(pin, q);
          pin.style.display = show ? "" : "none";
        });
      }

      chips.forEach((chip) => {
        chip.addEventListener("click", () => {
          chips.forEach((c) => c.classList.remove("active"));
          chip.classList.add("active");

          currentFilter = chip.dataset.filter;
          applyAll();

          window.scrollTo({ top: 0, behavior: "smooth" });
        });
      });

      function doSearch() {
        currentQuery = searchInput.value;
        applyAll();
        window.scrollTo({ top: 0, behavior: "smooth" });
      }

      searchBtn.addEventListener("click", doSearch);
      searchInput.addEventListener("input", doSearch);

      // m·∫∑c ƒë·ªãnh
      applyAll();
    </script>
  </body>
</html>
